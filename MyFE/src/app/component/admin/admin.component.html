<nav class="navbar navbar-expand-lg navbar-dark bg-dark p-0">

    <a class="navbar-brand" routerLink="/home">
        <img src="https://res.cloudinary.com/dkmk9tdwx/image/upload/v1628192627/logo_v5ukvv.png"
            style="width: 40px;height: 40px;">Circle's Shop</a>
    <button class="navbar-toggler" type="button" (click)="isCollapsed = !isCollapsed"
        [attr.aria-expanded]="!isCollapsed" aria-controls="navbarSupportedContent" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse" [collapse]="isCollapsed">
        <ul class="navbar-nav  ml-auto ">
            <li class="nav-item px-2">
                <a  [class.active]="active_tab=='db'" (click)="switchTab('db')" class="nav-link">Dashboard</a>
            </li>
            <li class="nav-item px-2">
                <a  [class.active]="active_tab=='order'"  (click)="switchTab('order')" class="nav-link">Orders</a>
            </li>
            <li class="nav-item px-2">
                <a [class.active]="active_tab=='product'"  (click)="switchTab('product')" class="nav-link">Product</a>
            </li>
            <li class="nav-item px-2">
                <a  [class.active]="active_tab=='user'"  (click)="switchTab('user')" class="nav-link">Users</a>
            </li>
        </ul>

        <ul class="navbar-nav ml-auto">
            <li class="nav-item dropdown mr-3">
                <a  class="nav-link dropdown-toggle" data-toggle="dropdown">
                    <i class="fas fa-user"></i> Welcome Brad
                </a>
                <div class="dropdown-menu">
                    <a class="dropdown-item">
                        <i class="fas fa-user-circle"></i> Profile
                    </a>
                    <a  class="dropdown-item">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                </div>
            </li>
            <li class="nav-item">
                <a  class="nav-link">
                    <i class="fas fa-user-times"></i> Logout
                </a>
            </li>
        </ul>
    </div>

</nav>

<!-- HEADER -->
<header id="main-header" class="py-2 bg-primary text-white">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 *ngIf="active_tab=='bd'">
                    <i class="fas fa-cog"></i> Dashboard
                </h1>
                <h1 *ngIf="active_tab=='order'">
                    <i class="fas fa-cart"></i> Orders
                </h1>
                <h1 *ngIf="active_tab=='product'">
                    <i class="fas fa-bag"></i> Products
                </h1>
                <h1 *ngIf="active_tab=='user'">
                    <i class="fas fa-users"></i> Users
                </h1>
            </div>
        </div>
    </div>
</header>

<!-- ACTIONS -->
<section id="actions" class="py-4 mb-4 bg-light" >
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <a  class="btn btn-primary btn-block"  (click)="switchTab('db')">
                    <i class="fas fa-plus"></i> Dashboard
                </a>
            </div>
            <div class="col-md-3" *ngIf="active_tab!='order'">
                <a  class="btn btn-success btn-block"  (click)="switchTab('order')">
                    <i class="fas fa-plus"></i> Order
                </a>
            </div>
            <div class="col-md-3" *ngIf="active_tab!='product'">
                <a  class="btn btn-warning btn-block"  (click)="switchTab('product')">
                    <i class="fas fa-plus"></i> Product
                </a>
            </div>
            <div class="col-md-3" *ngIf="active_tab!='user'">
                <a class="btn btn-info btn-block"  (click)="switchTab('user')">
                    <i class="fas fa-plus"></i> User
                </a>
            </div>
        </div>
        <hr>
    </div>
</section>

<!-- POSTS -->
<section id="posts" >
    <div class="container">

        <div class="row" >
     
            <div class="col-md-9" *ngIf="active_tab=='user'">
                <div class="card ">
                    <div class="card-header">
                        <h4>Users</h4>
                        <button class="btn btn-info">
                            <i class="fas fa-plus"></i>
                        </button>
                        <div class="d-flex flex-wrap justify-content-around ">
                            <div class="form-group">
                                <label>Role: </label>
                                <select class="form-select" [(ngModel)]="role" (change)=" getUser()">
                                    <option value="all" selected="true">All</option>
                                    <option value="Administrator">Admin</option>
                                    <option value="Shipper">Shipper</option>
                                    <option value="User">User</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Order: </label>
                                <select class="form-select" [(ngModel)]="orderUser" (change)=" getUser()">
                                    <option value="Id" selected="true">Id</option>
                                    <option value="Email">Email</option>
                                    <option value="Name">Name</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Page Size: </label>
                                <select class="form-select" [(ngModel)]="pageSizeUser" (change)=" getUser()">
                                    <option value="5" selected="true">5</option>
                                    <option value="2">2</option>
                                    <option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped  ">
                            <thead class="thead-dark">
                                <tr>

                                    <th>Display Info</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Verified</th>
                                    <th >Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let o of pagedUserList,index as i">

                                    <td>
                                        <img src="{{o.imgUrl}}" style="width: 40px;height: 40px;">
                                        <p class="text-tron text-monospace">{{o.displayName}}({{o.roles[0]}})</p>
                                    </td>
                                    <td style="word-break: break-all;">{{o.email}}</td>
                                    <td>{{o.phoneNumber}}</td>
                                    <td *ngIf="o.emailConfirmed">
                                        <p class="text-tron text-success"><i class="fas fa-check"></i></p>
                                    </td>
                                    <td *ngIf="!o.emailConfirmed">
                                        <p class="text-tron text-danger"><i class="fas fa-times"></i></p>
                                    </td>
                                    <td>
                                        <button class="btn btn-info">
                                            <i class="far fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="container d-flex justify-content-center ">
                        <div class="row">
                            <div class="col">
                                <div id="ng-pagi">
                                    <ngb-pagination [(page)]="pageNumberUser" [pageSize]="pageSizeUser"
                                        [collectionSize]="userList.length" [maxSize]="3" [boundaryLinks]=true
                                        (pageChange)="getPagedUserList()" size="sm">
                                    </ngb-pagination>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>





            <!-- ---------------------------------------------------------------------------------------------------- -->

            <div class="col-md-9" *ngIf="active_tab=='order'">
                <div class="card ">
                    <div class="card-header">
                        <h4>Order</h4>
                        <button class="btn btn-info">
                            <i class="fas fa-plus"></i>
                        </button>
                        <div class="d-flex flex-wrap justify-content-around ">
                            <div class="form-group">
                                <label>Status: </label>
                                <select class="form-select" [(ngModel)]="status" (change)=" onPageSizeStatusChage()">
                                    <option value="99" selected="true">All</option>
                                    <option value="0">Not Checked</option>
                                    <option value="1">Checked</option>
                                    <option value="2">Delivering</option>
                                    <option value="3">Done</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Order: </label>
                                <select class="form-select" [(ngModel)]="orderOrder" (change)=" onPageSizeStatusChage()">
                                    <option value="Id" selected="true">Id</option>
                                    <option value="Price">Total Price</option>
                                    <option value="OrderDate">OrderDate</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Page Size: </label>
                                <select class="form-select" [(ngModel)]="pageSizeOrder" (change)=" onPageSizeStatusChage()">
                                    <option value="5" selected="true">5</option>
                                    <option value="2">2</option>
                                    <option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped  ">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Id</th>
                                    <th>Contact Info</th>
                                    <th>Order Date</th>
                                    <th>Total Item</th>
                                    <th>Total Price</th>
                                    <th>Status</th>
                                    <th >Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let o of orderList,index as i">

                                    <td>   
                                        <p class="text-tron text-monospace">{{o.id}}</p>
                                    </td>
                                    <td >
                                        <p class="text-tron text-monospace">{{o.contactName}}</p>
                                        <p class="text-tron text-monospace">{{o.address}}</p>
                                        <p class="text-tron text-monospace">{{o.email}}</p>
                                    </td>
                                    <td><p class="text-tron text-monospace">{{o.orderDate}}</p></td>
                                    <td>{{o.totalItem}}</td>
                                    <td>{{(o.totalPrice).toFixed(2)}}</td>
                                    <td *ngIf="o.status==0">
                                        <p class="text-tron text-success"><i class="fas fa-times"></i>Not Checked</p>
                                    </td>
                                    <td *ngIf="o.status==1">
                                        <p class="text-tron text-success"><i class="fas fa-edit"></i>Checked</p>
                                    </td>
                                    <td *ngIf="o.status==2">
                                        <p class="text-tron text-success"><i class="fas fa-shipping-fast"></i>Delivering</p>
                                    </td>
                                    <td *ngIf="o.status==3">
                                        <p class="text-tron text-success"><i class="fas fa-check"></i>Done</p>
                                    </td>
                                    <td>
                                        <button class="btn btn-info">
                                            <i class="far fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="container d-flex justify-content-center ">
                        <div class="row">
                            <div class="col">
                                <div id="ng-pagi">
                                    <ngb-pagination [(page)]="pageNumberOrder" [pageSize]="pageSizeOrder"
                                        [collectionSize]="collectionSizeOrder" [maxSize]="3" [boundaryLinks]=true
                                        (pageChange)="getOrder()" size="sm">
                                    </ngb-pagination>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <!-- ------------------------------------------------------------------------------------------------------------------ -->

            <div class="col-md-9" *ngIf="active_tab=='product'">
                <div class="card ">
                    <div class="card-header">
                        <h4>Product</h4>
                        <button class="btn btn-info">
                            <i class="fas fa-plus"></i>
                        </button>
                        <div class="d-flex flex-wrap justify-content-around ">
                            <div class="form-group">
                                <label>Category: </label>
                                <select class="form-select" [(ngModel)]="category" (change)=" onPageSizeCategoryChange()">
                                    <option value="all" selected="true">All</option>
                                    <option value="Fruit">Fruit</option>
                                    <option value="Vegetable">Vegetable</option>
                                    <option value="Confectionery">Confectionery</option>
                                    <option value="Snack">Snack</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Order: </label>
                                <select class="form-select" [(ngModel)]="orderProduct" (change)=" onPageSizeCategoryChange()">
                                    <option value="Id" selected="true">Id</option>
                                    <option value="Price">Price</option>
                                    <option value="Name">Name</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Page Size: </label>
                                <select class="form-select" [(ngModel)]="pageSizeProduct" (change)=" onPageSizeCategoryChange()">
                                    <option value="5" selected="true">5</option>
                                    <option value="2">2</option>
                                    <option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped  ">
                            <thead class="thead-dark">
                                <tr>

                                    <th>Display Info</th>
                                    <th>Price</th>
                                    <th>UiS</th>
                                    <th>Category</th>
                                    <th >Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let o of productList,index as i">

                                    <td>
                                        <img src="{{o.imgUrl}}" style="width: 40px;height: 40px;">
                                        <p class="text-tron text-monospace">{{o.name}}</p>
                                    </td>
                                    <td>{{o.price}}</td>
                                    <td>{{o.unitInStock}}</td>
                                    <td >
                                        <p class="text-tron text-success">{{o.category}}</p>
                                    </td>
                                    <td>
                                        <button class="btn btn-info">
                                            <i class="far fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="container d-flex justify-content-center ">
                        <div class="row">
                            <div class="col">
                                <div id="ng-pagi">
                                    <ngb-pagination [(page)]="pageNumberProduct" [pageSize]="pageSizeProduct"
                                        [collectionSize]="collectionSizeProduct" [maxSize]="3" [boundaryLinks]=true
                                        (pageChange)="getProduct()" size="sm">
                                    </ngb-pagination>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>




            <div class="col-md-3" id='side-info'>
                <div class="card text-center bg-primary text-white mb-3">
                    <div class="card-body">
                        <h3>Order</h3>
                        <h4 class="display-4">
                            <i class="fas fa-pencil-alt"></i> {{dashboardInfo.totalOrder}}
                        </h4>
                        <a (click)="switchTab('order')" class="btn btn-outline-light btn-sm">View</a>
                    </div>
                </div>

                <div class="card text-center bg-success text-white mb-3">
                    <div class="card-body">
                        <h3>Product</h3>
                        <h4 class="display-4">
                            <i class="fas fa-folder"></i>{{dashboardInfo.totalProduct}}
                        </h4>
                        <a (click)="switchTab('product')" class="btn btn-outline-light btn-sm">View</a>
                    </div>
                </div>

                <div class="card text-center bg-warning text-white mb-3">
                    <div class="card-body">
                        <h3>Users</h3>
                        <h4 class="display-4">
                            <i class="fas fa-users"></i>{{dashboardInfo.totalUser}}
                        </h4>
                        <a (click)="switchTab('user')" class="btn btn-outline-light btn-sm">View</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer id="main-footer" class="bg-dark text-white mt-5 p-5">
    <div class="container">
        <div class="row">
            <div class="col">
                <p class="lead text-center">
                    Copyright &copy;
                    <span id="year"></span>
                    Blogen
                </p>
            </div>
        </div>
    </div>
</footer>